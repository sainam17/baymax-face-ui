<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BayMax Robot Face</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #000000;
      overflow: hidden;
      user-select: none;
      -webkit-user-select: none;
      width: 100vw;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* ===== FACE CONTAINER ===== */
    .face-container {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      transition: transform 0.5s ease-in-out;
    }

    .face-container.breathing {
      animation: breathe 4s ease-in-out infinite;
    }

    @keyframes breathe {

      0%,
      100% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.015);
      }
    }

    /* ===== EYES ROW ===== */
    .eyes-row {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 180px;
    }

    /* ===== EYE SOCKET ===== */
    .eye-socket {
      position: relative;
      width: 160px;
      height: 220px;
      border-radius: 80px;
      overflow: hidden;
      background: #000000;
    }

    /* ===== EYEBALL — neon blue fill ===== */
    .eyeball {
      position: absolute;
      inset: 0;
      border-radius: 80px;
      background: #00e5ff;
      box-shadow:
        0 0 20px rgba(0, 229, 255, 0.4),
        0 0 40px rgba(0, 229, 255, 0.15),
        inset 0 0 15px rgba(0, 180, 220, 0.3);
      transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94),
        border-radius 0.4s ease,
        width 0.4s ease,
        height 0.4s ease;
    }

    /* Angry red eyes override */
    .eyeball.eyeball-angry {
      background: #ff3333 !important;
      box-shadow:
        0 0 20px rgba(255, 51, 51, 0.5),
        0 0 40px rgba(255, 51, 51, 0.2),
        inset 0 0 15px rgba(200, 30, 30, 0.3) !important;
    }

    /* ===== EYELIDS — black to blend with background ===== */
    .eyelid {
      position: absolute;
      left: -10%;
      width: 120%;
      height: 55%;
      background: #000000;
      z-index: 10;
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      pointer-events: none;
    }

    .eyelid-top {
      top: 0;
      transform: translateY(-100%);
      transform-origin: center bottom;
    }

    .eyelid-bottom {
      bottom: 0;
      transform: translateY(100%);
      transform-origin: center top;
    }

    /* ===== EYELID STATES ===== */

    /* Blink — closed */
    .eyelid-top.closed {
      transform: translateY(0%) rotate(0deg) !important;
    }

    .eyelid-bottom.closed {
      transform: translateY(0%) rotate(0deg) !important;
    }

    /* Happy squint — curved eyes (bottom up) */
    .eyelid-bottom.squint {
      transform: translateY(40%) rotate(0deg);
    }

    /* Sad — top eyelids droop */
    .eye-socket.left-eye .eyelid-top.sad {
      transform: translateY(-50%) rotate(-10deg);
    }

    .eye-socket.right-eye .eyelid-top.sad {
      transform: translateY(-50%) rotate(10deg);
    }

    /* Angry — V-shaped eyelids */
    .eye-socket.left-eye .eyelid-top.angry {
      transform: translateY(-45%) rotate(15deg);
    }

    .eye-socket.right-eye .eyelid-top.angry {
      transform: translateY(-45%) rotate(-15deg);
    }

    /* Surprised — wide open */
    .eyelid-top.wide {
      transform: translateY(-100%) rotate(0deg);
    }

    .eyelid-bottom.wide {
      transform: translateY(100%) rotate(0deg);
    }

    /* Cheerful wink — right eye fully closed */
    .eyelid-top.wink {
      transform: translateY(0%) rotate(0deg);
    }

    .eyelid-bottom.wink {
      transform: translateY(0%) rotate(0deg);
    }

    /* ===== WINK ARC (upward asymmetric curve) ===== */
    .wink-arc-container {
      position: absolute;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 15;
    }

    .wink-arc-container.active {
      display: flex;
    }

    .wink-arc {
      width: 100%;
      height: 50%;
      border: 5px solid #00e5ff;
      border-bottom: none;
      border-radius: 100px 60px 0 0;
      box-shadow:
        0 -4px 15px rgba(0, 229, 255, 0.5),
        0 -2px 8px rgba(0, 229, 255, 0.3);
      position: relative;
      margin-top: 10%;
    }

    /* Single sparkle star at the right end of the curve */
    .wink-sparkle {
      position: absolute;
      right: -4px;
      bottom: -4px;
    }

    /* Star cross (pops up) */
    .wink-sparkle-star {
      position: absolute;
      width: 16px;
      height: 16px;
      right: 0;
      bottom: 0;
      transform: translate(50%, 50%) rotate(45deg);
      animation: star-pop 1.5s ease-in-out infinite;
    }

    .wink-sparkle-star::before,
    .wink-sparkle-star::after {
      content: '';
      position: absolute;
      background: #00e5ff;
      border-radius: 2px;
    }

    .wink-sparkle-star::before {
      width: 3px;
      height: 100%;
      left: 50%;
      top: 0;
      transform: translateX(-50%);
    }

    .wink-sparkle-star::after {
      width: 100%;
      height: 3px;
      top: 50%;
      left: 0;
      transform: translateY(-50%);
    }

    @keyframes star-pop {

      0%,
      100% {
        opacity: 0.2;
        transform: translate(50%, 50%) rotate(45deg) scale(0.4);
      }

      50% {
        opacity: 1;
        transform: translate(50%, 50%) rotate(45deg) scale(1.4);
      }
    }

    /* Round spinning dot orbiting the star */
    .wink-sparkle-orbit {
      position: absolute;
      width: 28px;
      height: 28px;
      right: -10px;
      bottom: -10px;
      animation: orbit-spin 2s linear infinite;
    }

    .wink-sparkle-orbit::after {
      content: '';
      position: absolute;
      width: 5px;
      height: 5px;
      background: #00e5ff;
      border-radius: 50%;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      box-shadow: 0 0 6px rgba(0, 229, 255, 0.7);
    }

    @keyframes orbit-spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    /* ===== EYEBALL ANIMATIONS ===== */
    @keyframes scan-eyeball {
      0% {
        transform: translateX(0);
      }

      20% {
        transform: translateX(15px);
      }

      40% {
        transform: translateX(15px);
      }

      60% {
        transform: translateX(-15px);
      }

      80% {
        transform: translateX(-15px);
      }

      100% {
        transform: translateX(0);
      }
    }

    .eyeball.scanning {
      animation: scan-eyeball 3s ease-in-out infinite;
    }

    /* ===== MOUTH ===== */
    .mouth {
      width: 80px;
      height: 6px;
      background-color: #00e5ff;
      border-radius: 10px;
      margin-top: 60px;
      box-shadow: 0 0 12px rgba(0, 229, 255, 0.5);
      transition: all 0.4s cubic-bezier(0.68, -0.6, 0.32, 1.6);
    }

    /* Smile arc */
    .mouth.smiling {
      width: 100px !important;
      height: 100px !important;
      background-color: transparent !important;
      border: 5px solid #00e5ff !important;
      border-radius: 50% !important;
      clip-path: inset(50% 0 0 0) !important;
      box-shadow: 0 0 15px rgba(0, 229, 255, 0.4) !important;
      margin-top: 10px !important;
    }

    /* Frown arc */
    .mouth.frowning {
      width: 80px !important;
      height: 80px !important;
      background-color: transparent !important;
      border: 5px solid #00e5ff !important;
      border-radius: 50% !important;
      clip-path: inset(0 0 50% 0) !important;
      box-shadow: 0 0 15px rgba(0, 229, 255, 0.4) !important;
      margin-top: 40px !important;
    }

    /* Surprised O */
    .mouth.circle {
      width: 40px !important;
      height: 40px !important;
      border-radius: 50% !important;
      background-color: #00e5ff !important;
      box-shadow: 0 0 18px rgba(0, 229, 255, 0.5) !important;
    }

    /* Angry zigzag — tight wavy line */
    .mouth.angry-line {
      width: 100px !important;
      height: 5px !important;
      background: linear-gradient(90deg, transparent 0%, #ff3333 10%, #ff3333 90%, transparent 100%) !important;
      box-shadow: 0 0 12px rgba(255, 51, 51, 0.5) !important;
      border-radius: 2px !important;
    }

    /* Talking animation */
    .mouth.talking {
      transition: all 0.15s cubic-bezier(0.5, 0, 0.5, 1.5);
    }

    /* ===== FACE OVERLAY — for loading/questioning/warning ===== */
    .face-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 50;
    }

    .face-overlay.active {
      display: flex;
    }

    /* Loading dots */
    .loading-dots {
      display: flex;
      gap: 24px;
      align-items: center;
    }

    .loading-dot {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: #ff5544;
      box-shadow: 0 0 16px rgba(255, 85, 68, 0.6);
      animation: dot-bounce 1.4s ease-in-out infinite;
    }

    .loading-dot:nth-child(2) {
      animation-delay: 0.2s;
    }

    .loading-dot:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes dot-bounce {

      0%,
      80%,
      100% {
        transform: scale(0.6);
        opacity: 0.4;
      }

      40% {
        transform: scale(1.2);
        opacity: 1;
      }
    }

    /* Symbol character (? and !) */
    .overlay-symbol {
      font-family: 'Arial Black', 'Segoe UI', sans-serif;
      font-size: 160px;
      font-weight: 900;
      line-height: 1;
      text-shadow: 0 0 30px currentColor, 0 0 60px currentColor;
    }

    .overlay-symbol.question {
      color: #ffd700;
    }

    .overlay-symbol.warning {
      color: #ff3333;
    }

    @keyframes symbol-pulse {

      0%,
      100% {
        transform: scale(1);
        opacity: 0.9;
      }

      50% {
        transform: scale(1.06);
        opacity: 1;
      }
    }

    .overlay-symbol {
      animation: symbol-pulse 2s ease-in-out infinite;
    }

    /* ===== BREATHING ===== */
    @keyframes breathe {

      0%,
      100% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.015);
      }
    }

    /* ===== GLOW PARTICLES ===== */
    .glow-particle {
      position: absolute;
      border-radius: 50%;
      pointer-events: none;
      z-index: 3;
      opacity: 0;
    }

    @keyframes particle-drift-1 {
      0% {
        opacity: 0;
        transform: translate(0, 0) scale(0.5);
      }

      20% {
        opacity: 0.6;
      }

      50% {
        opacity: 0.3;
        transform: translate(8px, -12px) scale(1);
      }

      80% {
        opacity: 0.5;
      }

      100% {
        opacity: 0;
        transform: translate(-5px, -25px) scale(0.3);
      }
    }

    @keyframes particle-drift-2 {
      0% {
        opacity: 0;
        transform: translate(0, 0) scale(0.3);
      }

      30% {
        opacity: 0.4;
        transform: translate(-8px, -6px) scale(0.8);
      }

      70% {
        opacity: 0.5;
        transform: translate(5px, -16px) scale(1);
      }

      100% {
        opacity: 0;
        transform: translate(-3px, -28px) scale(0.2);
      }
    }

    @keyframes particle-drift-3 {
      0% {
        opacity: 0;
        transform: translate(0, 0) scale(0.6);
      }

      25% {
        opacity: 0.45;
        transform: translate(10px, -4px) scale(0.9);
      }

      75% {
        opacity: 0.25;
        transform: translate(-6px, -20px) scale(0.7);
      }

      100% {
        opacity: 0;
        transform: translate(3px, -32px) scale(0.1);
      }
    }
  </style>
</head>

<body>

  <!-- Main Face Container -->
  <div id="faceContainer" class="face-container breathing">

    <!-- Face Overlay (for loading/questioning/warning) -->
    <div id="faceOverlay" class="face-overlay">
      <div id="overlayContent"></div>
    </div>

    <!-- Eyes Row -->
    <div class="eyes-row" id="eyesRow">

      <!-- Left Eye -->
      <div id="leftEye" class="eye-socket left-eye">
        <div class="eyelid eyelid-top" id="leftEyelidTop"></div>
        <div class="eyeball" id="leftEyeball"></div>
        <div class="eyelid eyelid-bottom" id="leftEyelidBottom"></div>
      </div>

      <!-- Right Eye -->
      <div id="rightEye" class="eye-socket right-eye">
        <div class="eyelid eyelid-top" id="rightEyelidTop"></div>
        <div class="eyeball" id="rightEyeball"></div>
        <div class="eyelid eyelid-bottom" id="rightEyelidBottom"></div>
        <!-- Wink arc (shown during cheerful) -->
        <div class="wink-arc-container" id="winkArcContainer">
          <div class="wink-arc">
            <div class="wink-sparkle">
              <div class="wink-sparkle-star"></div>
              <div class="wink-sparkle-orbit"></div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- Mouth -->
    <div id="mouth" class="mouth"></div>
  </div>

  <script>
    // ==========================================
    // CONFIGURATION
    // ==========================================
    const NEON_BLUE = '#00e5ff';
    const ANGRY_RED = '#ff3333';

    const CONFIG = {
      timings: {
        blinkDuration: 250,
        minBlinkDelay: 3000,
        maxBlinkDelay: 7000,
        talkUpdateSpeed: 150,
      },
      sizes: {
        mouth: {
          minWidth: 30,
          maxWidth: 100,
          minHeight: 8,
          maxHeight: 50
        }
      }
    };

    // ==========================================
    // STATE
    // ==========================================
    const State = {
      currentExpression: 'idle',
      intervals: { talking: null },
    };

    // ==========================================
    // UI ELEMENTS
    // ==========================================
    const UI = {
      leftEye: document.getElementById('leftEye'),
      rightEye: document.getElementById('rightEye'),
      leftEyelidTop: document.getElementById('leftEyelidTop'),
      leftEyelidBottom: document.getElementById('leftEyelidBottom'),
      rightEyelidTop: document.getElementById('rightEyelidTop'),
      rightEyelidBottom: document.getElementById('rightEyelidBottom'),
      leftEyeball: document.getElementById('leftEyeball'),
      rightEyeball: document.getElementById('rightEyeball'),
      mouth: document.getElementById('mouth'),
      faceContainer: document.getElementById('faceContainer'),
      eyesRow: document.getElementById('eyesRow'),
      faceOverlay: document.getElementById('faceOverlay'),
      overlayContent: document.getElementById('overlayContent'),
    };

    const allEyelidTops = [UI.leftEyelidTop, UI.rightEyelidTop];
    const allEyelidBottoms = [UI.leftEyelidBottom, UI.rightEyelidBottom];
    const allEyelids = [...allEyelidTops, ...allEyelidBottoms];
    const allEyeballs = [UI.leftEyeball, UI.rightEyeball];

    // ==========================================
    // MOUTH CONTROLLER
    // ==========================================
    const MouthController = {
      randomize() {
        const { minWidth, maxWidth, minHeight, maxHeight } = CONFIG.sizes.mouth;
        const w = Math.floor(Math.random() * (maxWidth - minWidth + 1)) + minWidth;
        const h = Math.floor(Math.random() * (maxHeight - minHeight + 1)) + minHeight;
        UI.mouth.style.width = `${w}px`;
        UI.mouth.style.height = `${h}px`;
        UI.mouth.style.borderRadius = '999px';
      },

      startTalking() {
        if (State.intervals.talking) return;
        UI.mouth.classList.add('talking');
        this.randomize();
        State.intervals.talking = setInterval(() => this.randomize(), CONFIG.timings.talkUpdateSpeed);
      },

      stopTalking() {
        if (State.intervals.talking) {
          clearInterval(State.intervals.talking);
          State.intervals.talking = null;
        }
        UI.mouth.classList.remove('talking');
      },

      reset() {
        this.stopTalking();
        UI.mouth.style.transition = 'none';
        UI.mouth.className = 'mouth';
        UI.mouth.style.width = '';
        UI.mouth.style.height = '';
        UI.mouth.style.borderRadius = '';
        UI.mouth.style.backgroundColor = '';
        UI.mouth.style.border = '';
        UI.mouth.style.clipPath = '';
        UI.mouth.style.marginTop = '';
        UI.mouth.style.boxShadow = '';
        void UI.mouth.offsetHeight;
        UI.mouth.style.transition = '';
      },

      setSmile() {
        UI.mouth.style.transition = 'none';
        UI.mouth.classList.add('smiling');
        void UI.mouth.offsetHeight;
        UI.mouth.style.transition = '';
      },

      setFrown() {
        UI.mouth.style.transition = 'none';
        UI.mouth.classList.add('frowning');
        void UI.mouth.offsetHeight;
        UI.mouth.style.transition = '';
      },

      setCircle() {
        UI.mouth.style.transition = 'none';
        UI.mouth.classList.add('circle');
        void UI.mouth.offsetHeight;
        UI.mouth.style.transition = '';
      },

      setAngryLine() {
        UI.mouth.style.transition = 'none';
        UI.mouth.classList.add('angry-line');
        void UI.mouth.offsetHeight;
        UI.mouth.style.transition = '';
      }
    };

    // ==========================================
    // OVERLAY CONTROLLER
    // ==========================================
    const OverlayController = {
      show(content) {
        UI.overlayContent.innerHTML = content;
        UI.faceOverlay.classList.add('active');
        UI.eyesRow.style.opacity = '0';
        UI.mouth.style.opacity = '0';
      },

      hide() {
        UI.faceOverlay.classList.remove('active');
        UI.overlayContent.innerHTML = '';
        UI.eyesRow.style.opacity = '1';
        UI.mouth.style.opacity = '1';
      },

      showLoading() {
        this.show(`
          <div class="loading-dots">
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
          </div>
        `);
      },

      showQuestion() {
        this.show('<div class="overlay-symbol question">?</div>');
      },

      showWarning() {
        this.show('<div class="overlay-symbol warning">!</div>');
      }
    };

    // ==========================================
    // EYE CONTROLLER
    // ==========================================
    const EyeController = {
      resetAll() {
        // Clear eyelid states
        const lidStates = ['closed', 'squint', 'sad', 'angry', 'wide', 'wink'];
        allEyelids.forEach(lid => {
          lidStates.forEach(s => lid.classList.remove(s));
        });

        // Clear eyeball classes and inline styles — CSS handles default neon blue
        allEyeballs.forEach(eb => {
          eb.classList.remove('scanning', 'eyeball-angry');
          eb.style.cssText = '';
        });

        // Hide wink arc
        const winkArc = document.getElementById('winkArcContainer');
        if (winkArc) winkArc.classList.remove('active');

        // Hide overlay
        OverlayController.hide();

        // Remove extra particles
        document.querySelectorAll('.glow-particle').forEach(p => p.remove());
      },

      blink() {
        allEyelidTops.forEach(lid => lid.classList.add('closed'));
        allEyelidBottoms.forEach(lid => lid.classList.add('closed'));
        setTimeout(() => {
          allEyelidTops.forEach(lid => lid.classList.remove('closed'));
          allEyelidBottoms.forEach(lid => lid.classList.remove('closed'));
        }, CONFIG.timings.blinkDuration);
      },

      startRandomBlinking() {
        const { minBlinkDelay, maxBlinkDelay } = CONFIG.timings;
        const delay = Math.random() * (maxBlinkDelay - minBlinkDelay) + minBlinkDelay;
        setTimeout(() => {
          const expr = State.currentExpression;
          // Don't blink during overlay states or scanning
          if (!['loading', 'questioning', 'warning', 'scanning'].includes(expr)) {
            this.blink();
          }
          this.startRandomBlinking();
        }, delay);
      },

      // -- Expression eye setups --

      setIdle() {
        // Default open eyes, neon blue
      },

      setSad() {
        // Droopy eyelids angled down
        allEyelidTops.forEach(lid => lid.classList.add('sad'));
      },

      setSurprised() {
        // Make eyes rounder/bigger — use CSS class instead of inline
        allEyeballs.forEach(eb => {
          eb.style.borderRadius = '50%';
          eb.style.margin = '10px';
          eb.style.width = 'calc(100% - 20px)';
          eb.style.height = 'calc(100% - 20px)';
        });
        allEyelidTops.forEach(lid => lid.classList.add('wide'));
        allEyelidBottoms.forEach(lid => lid.classList.add('wide'));
      },

      setAngry() {
        // V-shaped eyelids + red color via CSS class
        allEyelidTops.forEach(lid => lid.classList.add('angry'));
        allEyeballs.forEach(eb => eb.classList.add('eyeball-angry'));
      },

      setHappy() {
        // Bottom eyelids up for squint/arc shape
        allEyelidBottoms.forEach(lid => lid.classList.add('squint'));
      },

      setCheerful() {
        // Left eye normal, right eye shows downward curve arc
        // Hide the right eyeball
        UI.rightEyeball.style.display = 'none';
        // Close right eyelids
        UI.rightEyelidTop.classList.add('wink');
        UI.rightEyelidBottom.classList.add('wink');
        // Show the wink arc with star particles
        const winkArc = document.getElementById('winkArcContainer');
        if (winkArc) winkArc.classList.add('active');
      },

      setScanning() {
        allEyeballs.forEach(eb => eb.classList.add('scanning'));
      }
    };

    // ==========================================
    // MAIN ROBOT CONTROLLER
    // ==========================================
    const RobotFace = {
      init() {
        this.setExpression('idle');
        EyeController.startRandomBlinking();
        this.createGlowParticles();
        this.exposeAPI();
        console.log('BayMax Face UI Initialized — Neon Blue Theme');
        console.log('Available expressions: idle, sad, surprised, angry, happy, cheerful, loading, questioning, warning');
      },

      createGlowParticles() {
        const particles = [
          { top: '30%', left: '25%', size: 3, color: 'rgba(0, 229, 255, 0.5)', anim: 'particle-drift-1', dur: '4s', delay: '0s' },
          { top: '50%', left: '60%', size: 2.5, color: 'rgba(0, 200, 255, 0.4)', anim: 'particle-drift-2', dur: '5s', delay: '1s' },
          { top: '65%', left: '35%', size: 3, color: 'rgba(0, 229, 255, 0.45)', anim: 'particle-drift-3', dur: '4.5s', delay: '1.8s' },
          { top: '20%', left: '55%', size: 2, color: 'rgba(0, 200, 255, 0.35)', anim: 'particle-drift-1', dur: '5.5s', delay: '0.6s' },
        ];

        allEyeballs.forEach(eyeball => {
          particles.forEach(p => {
            const dot = document.createElement('div');
            dot.className = 'glow-particle';
            dot.style.top = p.top;
            dot.style.left = p.left;
            dot.style.width = `${p.size}px`;
            dot.style.height = `${p.size}px`;
            dot.style.background = `radial-gradient(circle, ${p.color}, transparent 70%)`;
            dot.style.boxShadow = `0 0 ${p.size * 2}px ${p.color}`;
            dot.style.animation = `${p.anim} ${p.dur} ease-in-out infinite ${p.delay}`;
            eyeball.appendChild(dot);
          });
        });
      },

      setExpression(expression) {
        // Reset everything
        EyeController.resetAll();
        MouthController.reset();
        UI.faceContainer.className = 'face-container breathing';

        State.currentExpression = expression;

        switch (expression) {
          case 'idle':
            EyeController.setIdle();
            MouthController.setSmile();
            break;

          case 'sad':
            EyeController.setSad();
            MouthController.setFrown();
            break;

          case 'surprised':
            EyeController.setSurprised();
            MouthController.setCircle();
            break;

          case 'angry':
            EyeController.setAngry();
            MouthController.setAngryLine();
            break;

          case 'happy':
            EyeController.setHappy();
            MouthController.setSmile();
            break;

          case 'cheerful':
            EyeController.setCheerful();
            MouthController.setSmile();
            break;

          case 'loading':
            OverlayController.showLoading();
            break;

          case 'questioning':
            OverlayController.showQuestion();
            break;

          case 'warning':
            OverlayController.showWarning();
            break;
        }

        // Re-create particles for normal eye states
        if (!['loading', 'questioning', 'warning'].includes(expression)) {
          this.createGlowParticles();
        }
      },

      exposeAPI() {
        window.robotFace = {
          setExpression: (expr) => this.setExpression(expr),
          blink: () => EyeController.blink(),
          setStatus: (text) => console.log('Status: ' + text)
        };

        window.setExpression = (expr) => this.setExpression(expr);
        window.blink = () => EyeController.blink();
      }
    };

    // Start
    RobotFace.init();
  </script>
</body>

</html>